(this.webpackJsonpfirst=this.webpackJsonpfirst||[]).push([[0],{132:function(e,t,n){e.exports={userPhoto:"users_userPhoto__3aja7"}},133:function(e,t,n){e.exports=n.p+"static/media/preloader.065bde9b.svg"},134:function(e,t,n){},135:function(e,t,n){e.exports={posts:"MyPosts_posts__2xqSr"}},14:function(e,t,n){e.exports={nav:"NavBar_nav__18tYi",item:"NavBar_item__P8Q5z",active:"NavBar_active__KYRse",friends:"NavBar_friends__GdisM"}},162:function(e,t,n){e.exports=n(292)},167:function(e,t,n){},168:function(e,t,n){},173:function(e,t,n){},174:function(e,t,n){},175:function(e,t,n){},292:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(63),s=n.n(o);n(167),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var i=n(22),c=n(23),l=n(25),u=n(24),m=(n(168),n(14)),p=n.n(m),f=n(12),d=function(){return r.a.createElement("nav",{className:p.a.nav},r.a.createElement("div",{className:p.a.item},r.a.createElement(f.b,{to:"/profile",activeClassName:p.a.active},r.a.createElement("p",null,"Profile"))),r.a.createElement("div",{className:p.a.item},r.a.createElement(f.b,{to:"/dialog",activeClassName:p.a.active},r.a.createElement("p",null,"Messages"))),r.a.createElement("div",{className:p.a.item},r.a.createElement(f.b,{to:"/users",activeClassName:p.a.active},r.a.createElement("p",null,"Users"))),r.a.createElement("div",{className:p.a.item},r.a.createElement(f.b,{to:"/news",activeClassName:p.a.active},r.a.createElement("p",null,"News"))),r.a.createElement("div",{className:p.a.item},r.a.createElement(f.b,{to:"/music",activeClassName:p.a.active},r.a.createElement("p",null,"Music"))),r.a.createElement("div",{className:p.a.item},r.a.createElement(f.b,{to:"/settings",activeClassName:p.a.active},r.a.createElement("p",null,"Settings"))))},g=(n(173),function(){return r.a.createElement("div",null,"News")}),E=(n(174),function(){return r.a.createElement("div",null,"Music")}),h=(n(175),function(){return r.a.createElement("div",null,"Settings")}),b=n(6),v=n(42),O=n(4),j={dialogs:[{name:"Igor",id:"1",img:"https://i.pinimg.com/236x/74/05/5f/74055f83bfbdc20fdc1f9d1fc116fd26.jpg"},{name:"Alexandr",id:"2",img:"https://i.pinimg.com/originals/9c/77/46/9c7746225873e02d83b9315501b8dd2f.jpg"},{name:"Sasha",id:"3",img:"https://shapka-youtube.ru/wp-content/uploads/2020/07/letter-s-1.jpg"},{name:"Pasha",id:"4",img:"https://whatsism.com/uploads/posts/2018-07/1530546770_rmk_vdjbx10.jpg"},{name:"Yana",id:"5",img:"https://i.pinimg.com/236x/7c/ab/18/7cab184c5e791921ed607e23458492b6.jpg"}],messages:[{message:"Hello",id:"1"},{message:"How are you?",id:"2"},{message:"You are shit!",id:"3"}]},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEND-MESSAGE":var n={id:5,message:t.newMessage};return Object(O.a)(Object(O.a)({},e),{},{messages:[].concat(Object(v.a)(e.messages),[n])});default:return e}},w=n(43),P=n.n(w),S=n(89),y=n.n(S),k=function(e){var t="/dialog/"+e.id;return r.a.createElement(f.b,{className:y.a.dialogItem,to:t,activeClassName:y.a.active},r.a.createElement("img",{src:e.img,alt:"AVA"}),r.a.createElement("p",null,e.name))},I=function(e){return r.a.createElement("div",{className:P.a.message},e.message)},C=n(126),N=n(127),x=function(e){return e?void 0:"Field is required"},T=function(e){return function(t){return t.length<=e?void 0:"Max length is ".concat(e," symbols")}},A=n(70),F=n(51),U=n.n(F),L=function(e){e.input;var t=e.meta,n=(e.child,Object(A.a)(e,["input","meta","child"])),a=t.error&&t.touched;return r.a.createElement("div",{className:U.a.formControl+" "+(a?U.a.error:"")},r.a.createElement("div",null,n.children),a&&r.a.createElement("span",null,t.error))},D=function(e){var t=e.input,n=(e.meta,e.child,Object(A.a)(e,["input","meta","child"]));return r.a.createElement(L,e,r.a.createElement("textarea",Object.assign({},t,n)))},M=function(e){var t=e.input,n=(e.meta,e.child,Object(A.a)(e,["input","meta","child"]));return r.a.createElement(L,e,r.a.createElement("input",Object.assign({},t,n)))},R=T(50),G=Object(N.a)({form:"dialogAddMessageForm"})((function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:e.handleSubmit},r.a.createElement(C.a,{placeholder:"Enter message",component:D,validate:[x,R],name:"newMessageBody"}),r.a.createElement("button",null,"Post")))})),z=function(e){var t=e.dialogsPage.dialogs.map((function(e){return r.a.createElement(k,{name:e.name,id:e.id,key:e.id,img:e.img})})),n=e.dialogsPage.messages.map((function(e){return r.a.createElement(I,{message:e.message,key:e.id})}));return e.isAuth?r.a.createElement("div",{className:P.a.dialogs},r.a.createElement("div",{className:P.a.dialogsItems},t),r.a.createElement("div",{className:P.a.messages},n,r.a.createElement(G,{onSubmit:function(t){e.addMessage(t.newMessageBody)}}))):r.a.createElement(b.a,{to:"/login"})},B=n(10),H=function(e){return{isAuth:e.auth.isAuth}},W=n(8),J=Object(W.d)(Object(B.b)((function(e){return{dialogsPage:e.dialogsPage}}),(function(e){return{addMessage:function(t){return e(function(e){return{type:"SEND-MESSAGE",newMessage:e}}(t))}}})),(function(e){var t=function(t){Object(l.a)(a,t);var n=Object(u.a)(a);function a(){return Object(i.a)(this,a),n.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return this.props.isAuth?r.a.createElement(e,this.props):r.a.createElement(b.a,{to:"/login"})}}]),a}(r.a.Component);return Object(B.b)(H)(t)}))(z),V=n(9),q=n.n(V),Y=n(17),Z=n(131).create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"00d1c0e0-f31d-402f-a46d-00a5a203cfd7"}}),K={getUsers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return Z.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},follow:function(e){return Z.post("follow/".concat(e))},unFollow:function(e){return Z.delete("follow/".concat(e))}},Q=function(){return Z.get("auth/me").then((function(e){return e.data}))},$=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Z.post("auth/login",{email:e,password:t,rememberMe:n}).then((function(e){return e.data}))},X=function(){return Z.delete("auth/login")},ee=function(e){return Z.get("profile/".concat(e)).then((function(e){return e.data}))},te=function(e){return Z.get("profile/status/".concat(e))},ne=function(e){return Z.put("profile/status",{status:e}).then((function(e){return e.data}))},ae=function(e){var t=new FormData;return t.append("image",e),Z.put("profile/photo",t,{headers:{"Content-Type":"multipart/form-data"}})},re=function(e,t,n,a){return e.map((function(e){return e[n]===t?Object(O.a)(Object(O.a)({},e),a):e}))},oe={users:[],pageSize:5,totalUsersCount:0,currentPage:1,isFetching:!1,followingInProgress:[]},se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FOLLOW":return Object(O.a)(Object(O.a)({},e),{},{users:re(e.users,t.userId,"id",{followed:!0})});case"UNFOLLOW":return Object(O.a)(Object(O.a)({},e),{},{users:re(e.users,t.userId,"id",{followed:!1})});case"SET_USERS":return Object(O.a)(Object(O.a)({},e),{},{users:t.users});case"SET_CURRENT_PAGE":return Object(O.a)(Object(O.a)({},e),{},{currentPage:t.currentPage});case"SET_USERS_TOTAL_COUNT":return Object(O.a)(Object(O.a)({},e),{},{totalUsersCount:t.totalCount});case"TOGGLE_IS_FETCHING":return Object(O.a)(Object(O.a)({},e),{},{isFetching:t.isFetching});case"TOGGLE_IS_FOLlOWING_IN_PROGRESS":return Object(O.a)(Object(O.a)({},e),{},{followingInProgress:t.isFetching?[].concat(Object(v.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return e!==t.userId}))});default:return oe}},ie=function(e){return{type:"FOLLOW",userId:e}},ce=function(e){return{type:"UNFOLLOW",userId:e}},le=function(e){return{type:"SET_CURRENT_PAGE",currentPage:e}},ue=function(e){return{type:"TOGGLE_IS_FETCHING",isFetching:e}},me=function(e,t){return{type:"TOGGLE_IS_FOLlOWING_IN_PROGRESS",isFetching:e,userId:t}},pe=function(){var e=Object(Y.a)(q.a.mark((function e(t,n,a,r){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(me(!0,n)),e.next=3,a(n);case 3:0===e.sent.data.resultCode&&t(r(n)),t(me(!1,n));case 6:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),fe=n(26),de=n(93),ge=n.n(de),Ee=r.a.memo((function(e){for(var t=e.totalUsersCount,n=e.pageSize,o=e.currentPage,s=e.onPageChanged,i=Math.ceil(t/n),c=[],l=Object(a.useState)(0),u=Object(fe.a)(l,2),m=u[0],p=u[1],f=Object(a.useState)(m+8),d=Object(fe.a)(f,2),g=d[0],E=d[1],h=Object(a.useState)(!0),b=Object(fe.a)(h,2),v=b[0],O=b[1],j=Object(a.useState)(!1),_=Object(fe.a)(j,2),w=_[0],P=_[1],S=1;S<=i;S++)c.push(S);var y=c.slice(m,g);return r.a.createElement("div",{className:ge.a.pageBlock},r.a.createElement("button",{onClick:function(){p((function(e){return e-1})),E((function(e){return e-1})),O(1===m),P(!1)},disabled:v},"\u2190"),y.map((function(e,t){return r.a.createElement("span",{key:t,className:o===e?ge.a.selectedPage:void 0,onClick:function(){return s(e)}},e)})),r.a.createElement("button",{onClick:function(){p((function(e){return e+1})),E((function(e){return e+1})),g===c.length-1?P(!0):P(!1),O(!1)},disabled:w},"\u2192"))})),he=n(67),be=n.n(he),ve=n(132),Oe=n.n(ve),je=function(e){var t=e.followingInProgress,n=e.unfollow,a=e.follow,o=e.user;return r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,r.a.createElement("div",null,r.a.createElement(f.b,{to:"profile/"+o.id},r.a.createElement("img",{src:null!=o.photos.small?o.photos.small:be.a,className:Oe.a.userPhoto,alt:"avatar"}))),r.a.createElement("div",null,o.followed?r.a.createElement("button",{disabled:t.some((function(e){return e===o.id})),onClick:function(){n(o.id)}},"Unfollow"):r.a.createElement("button",{disabled:t.some((function(e){return e===o.id})),onClick:function(){a(o.id)}},"Follow"))),r.a.createElement("span",null,r.a.createElement("span",null,r.a.createElement("div",null,o.name),r.a.createElement("div",null,"user.status")),r.a.createElement("span",null,r.a.createElement("div",null,"user.location.country"),r.a.createElement("div",null,"user.location.city"))))},_e=function(e){var t=e.totalUsersCount,n=e.pageSize,a=e.currentPage,o=e.onPageChanged,s=e.users,i=e.followingInProgress,c=e.unfollow,l=e.follow;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ee,{totalUsersCount:t,pageSize:n,currentPage:a,onPageChanged:o}),s.map((function(e){return r.a.createElement(je,{key:e.id,followingInProgress:i,unfollow:c,follow:l,user:e})})))},we=n(133),Pe=n.n(we),Se=function(){return r.a.createElement("div",{style:{backgroundColor:"#292729",height:"100%",width:"100%",textAlign:"center"}},r.a.createElement("img",{src:Pe.a,alt:""}))},ye=function(e){return e.usersPage.users},ke=function(e){return e.usersPage.pageSize},Ie=function(e){return e.usersPage.totalUsersCount},Ce=function(e){return e.usersPage.currentPage},Ne=function(e){return e.usersPage.isFetching},xe=function(e){return e.usersPage.followingInProgress},Te=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).onPageChanged=function(t){e.props.requestUsers(t,e.props.pageSize)},e.render=function(){return r.a.createElement(r.a.Fragment,null,e.props.isFetching?r.a.createElement(Se,null):null,r.a.createElement(_e,{totalUsersCount:e.props.totalUsersCount,pageSize:e.props.pageSize,currentPage:e.props.currentPage,users:e.props.users,unfollow:e.props.unfollow,follow:e.props.follow,onPageChanged:e.onPageChanged,followingInProgress:e.props.followingInProgress}))},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.props.requestUsers(this.props.currentPage,this.props.pageSize)}}]),n}(r.a.Component),Ae=Object(B.b)((function(e){return{users:ye(e),pageSize:ke(e),totalUsersCount:Ie(e),currentPage:Ce(e),isFetching:Ne(e),followingInProgress:xe(e)}}),{follow:function(e){return function(){var t=Object(Y.a)(q.a.mark((function t(n){return q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:pe(n,e,K.follow.bind(e),ie);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},unfollow:function(e){return function(t){pe(t,e,K.unFollow.bind(e),ce)}},setCurrentPage:le,toggleIsFollowingInProgress:me,requestUsers:function(e,t){return function(){var n=Object(Y.a)(q.a.mark((function n(a){var r;return q.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a(ue(!0)),n.next=3,K.getUsers(e,t);case 3:r=n.sent,a(ue(!1)),a(le(e)),a({type:"SET_USERS",users:r.items}),a({type:"SET_USERS_TOTAL_COUNT",totalCount:r.totalCount});case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}})(Te),Fe=n(134),Ue=n.n(Fe),Le=n(54),De=n.n(Le),Me=function(e){var t=Object(a.useState)(!1),n=Object(fe.a)(t,2),o=n[0],s=n[1],i=Object(a.useState)(e.status),c=Object(fe.a)(i,2),l=c[0],u=c[1];Object(a.useEffect)((function(){return u(e.status)}),[e.status]);return r.a.createElement(r.a.Fragment,null,o&&r.a.createElement("div",null,r.a.createElement("input",{autoFocus:!0,onChange:function(e){return u(e.currentTarget.value)},onBlur:function(){s(!1),e.updateStatus(l),u(e.status)},type:"text",value:l})),!o&&r.a.createElement("div",null,r.a.createElement("span",{onDoubleClick:function(){return s(!0)}}," ",e.status||"No status")))},Re=function(e){e.profile;return r.a.createElement("form",null,r.a.createElement("button",{type:"submit"},"Save"),"Form")},Ge=function(e){var t=e.profile,n=e.isOwner,a=e.activateEditing;return r.a.createElement("div",{className:De.a.data},n&&r.a.createElement("button",{onClick:a},"Edit my information"),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("b",null,"About me:")," ",t.aboutMe?t.aboutMe:"I'm so lazy for writing it"),r.a.createElement("li",null,r.a.createElement("b",null,"Looking for a job:")," ",t.lookingForAJob?"yes":"no"),t.lookingForAJob&&r.a.createElement("li",null,r.a.createElement("b",null,"Resume:")," ",t.lookingForAJobDescription),r.a.createElement("li",null,r.a.createElement("b",null,"Contacts:"),r.a.createElement("ul",null,Object.keys(t.contacts).map((function(e){return r.a.createElement("li",{key:e},r.a.createElement("b",null,e,":")," ",t.contacts[e]?t.contacts[e]:"I'm not using it")}))))))},ze=function(e){var t=Object(a.useState)(!1),n=Object(fe.a)(t,2),o=n[0],s=n[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:De.a.profileInfo},r.a.createElement("div",{className:De.a.avatar},r.a.createElement("img",{src:null!=e.profile.photos.large?e.profile.photos.large:be.a,alt:"ava "}),e.isOwner&&r.a.createElement("input",{type:"file",onChange:function(t){t.target.files.length&&e.savePhoto(t.target.files[0])}})),r.a.createElement("div",{className:De.a.description},r.a.createElement("h2",null,e.profile.fullName),r.a.createElement(Me,{status:e.status,updateStatus:e.updateStatus}))),o?r.a.createElement(Re,{profile:e.profile}):r.a.createElement(Ge,{activateEditing:function(){return s(!0)},isOwner:e.isOwner,profile:e.profile}))},Be={posts:[{text:"Hi, how are you?",id:"1",likes:15,img:"https://whatsism.com/uploads/posts/2018-07/1530546770_rmk_vdjbx10.jpg"},{text:"Oh, thanks. I'm fine)",id:"2",likes:25,img:"https://shapka-youtube.ru/wp-content/uploads/2020/07/letter-s-1.jpg"}],newPostText:"",profile:null,status:""},He=function(e){return{type:"SET_STATUS",status:e}},We=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD-POST":var n={text:t.postText,id:5,likes:0,img:"https://i.pinimg.com/originals/9c/77/46/9c7746225873e02d83b9315501b8dd2f.jpg"};return Object(O.a)(Object(O.a)({},e),{},{posts:[].concat(Object(v.a)(e.posts),[n]),newPostText:""});case"DELETE_POST":return Object(O.a)(Object(O.a)({},e),{},{posts:e.posts.filter((function(e){return e.id!==t.postID}))});case"SET_USER_PAGE":return Object(O.a)(Object(O.a)({},e),{},{profile:t.profile});case"SET_STATUS":return Object(O.a)(Object(O.a)({},e),{},{status:t.status});case"SAVE_PHOTO":return Object(O.a)(Object(O.a)({},e),{},{profile:Object(O.a)(Object(O.a)({},e.profile),{},{photos:t.photos})});default:return e}},Je=n(135),Ve=n.n(Je),qe=n(69),Ye=n.n(qe),Ze=function(e){return r.a.createElement("div",{className:Ye.a.item},r.a.createElement("div",{className:Ye.a.body},r.a.createElement("img",{src:e.img,alt:"avatar"}),r.a.createElement("p",null,e.messages)),r.a.createElement("div",{className:Ye.a.like},r.a.createElement("p",null,"Likes:",e.like)))},Ke=Object(a.memo)((function(e){var t=e.posts.map((function(e){return r.a.createElement(Ze,{messages:e.text,key:e.id,like:e.likes,img:e.img})}));return r.a.createElement("div",{className:Ve.a.posts},r.a.createElement("div",null,r.a.createElement($e,{onSubmit:function(t){e.addPost(t.postText)}})),r.a.createElement("div",null,t))})),Qe=T(10),$e=Object(N.a)({form:"profileAddPostForm"})((function(e){return r.a.createElement("form",{onSubmit:e.handleSubmit},r.a.createElement(C.a,{name:"postText",component:D,placeholder:"Text of new post",validate:[x,Qe]}),r.a.createElement("button",null,"Add post"))})),Xe=Ke,et=Object(B.b)((function(e){return{posts:e.profilePage.posts,newPostText:e.profilePage.newPostText}}),(function(e){return{addPost:function(t){return e(function(e){return{type:"ADD-POST",postText:e}}(t))}}}))(Xe),tt=function(e){return e.profile?r.a.createElement("div",{className:Ue.a.content},r.a.createElement(ze,{savePhoto:e.savePhoto,isOwner:e.isOwner,profile:e.profile,status:e.status,updateStatus:e.updateStatus}),r.a.createElement(et,null)):r.a.createElement(Se,null)},nt=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"refreshProfile",value:function(){var e=this.props.match.params.userId;e||(e=this.props.authorizedUserId)||this.props.history.push("/login"),this.props.selectedUser(e),this.props.getStatus(e)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e,t,n){this.props.match.params.userId!==e.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(tt,Object.assign({},this.props,{profile:this.props.profile,isOwner:!this.props.match.params.userId,status:this.props.status,updateStatus:this.props.updateStatus,savePhoto:this.props.savePhoto})))}}]),n}(r.a.Component),at=Object(W.d)(Object(B.b)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,authorizedUserId:e.auth.userId,isAuth:e.auth.isAuth}}),{selectedUser:function(e){return function(){var t=Object(Y.a)(q.a.mark((function t(n){var a;return q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ee(e);case 2:a=t.sent,n({type:"SET_USER_PAGE",profile:a});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},getStatus:function(e){return function(){var t=Object(Y.a)(q.a.mark((function t(n){var a;return q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,te(e);case 2:a=t.sent,n(He(a.data));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},updateStatus:function(e){return function(){var t=Object(Y.a)(q.a.mark((function t(n){return q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ne(e);case 2:0===t.sent.resultCode&&n(He(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},savePhoto:function(e){return function(){var t=Object(Y.a)(q.a.mark((function t(n){var a;return q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ae(e);case 2:0===(a=t.sent).data.resultCode&&n({type:"SAVE_PHOTO",photos:a.data.data.photos});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),b.f)(nt),rt=n(94),ot=n.n(rt),st=function(e){return r.a.createElement("header",{className:ot.a.header},r.a.createElement("img",{src:"https://s2.coinmarketcap.com/static/img/coins/200x200/2099.png",alt:"Logo"}),r.a.createElement("div",{className:ot.a.loginBlock},e.isAuth?r.a.createElement("div",null,e.login," - ",r.a.createElement("button",{onClick:e.logout},"Logout")):r.a.createElement(f.b,{to:"/login"},"Login")))},it=n(37),ct={userId:null,email:null,login:null,isAuth:!1},lt=function(e,t,n,a){return{type:"SET_USER_DATA",payload:{userId:e,email:t,login:n,isAuth:a}}},ut=function(){return function(){var e=Object(Y.a)(q.a.mark((function e(t){var n,a,r,o,s;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q();case 2:0===(n=e.sent).resultCode&&(a=n.data,r=a.id,o=a.email,s=a.login,t(lt(r,o,s,!0)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},mt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ct,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER_DATA":return Object(O.a)(Object(O.a)({},e),t.payload);default:return e}},pt=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return r.a.createElement(st,this.props)}}]),n}(r.a.Component),ft=Object(B.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login}}),{logout:function(){return function(){var e=Object(Y.a)(q.a.mark((function e(t){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X();case 2:0===e.sent.data.resultCode&&t(lt(null,null,null,!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})(pt),dt=Object(N.a)({form:"login"})((function(e){var t=e.handleSubmit,n=e.error;return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:t},r.a.createElement("div",null,r.a.createElement(C.a,{component:M,validate:[x],name:"email",placeholder:"Email"})),r.a.createElement("div",null,r.a.createElement(C.a,{component:M,validate:[x],name:"password",placeholder:"Password",type:"password"})),r.a.createElement("div",null,r.a.createElement(C.a,{component:"input",name:"rememberMe",type:"checkbox"}),r.a.createElement("span",null,"Remember me")),n&&r.a.createElement("div",{className:U.a.formSummaryError},n),r.a.createElement("div",null,r.a.createElement("button",null,"Sign in"))))})),gt=Object(B.b)((function(e){return{isAuth:e.auth.isAuth}}),{login:function(e,t,n){return function(){var a=Object(Y.a)(q.a.mark((function a(r){var o,s;return q.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,$(e,t,n);case 2:0===(o=a.sent).resultCode?r(ut()):(s=o.messages.length>0?o.messages[0]:"Some error",r(Object(it.a)("login",{_error:s})));case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}})((function(e){return e.isAuth?r.a.createElement(b.a,{to:"/profile"}):r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Login"),r.a.createElement(dt,{onSubmit:function(t){e.login(t.email,t.password,t.rememberMe)}}))})),Et={initialized:!1},ht=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Et,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_INITIALIZED":return Object(O.a)(Object(O.a)({},e),{},{initialized:!0});default:return e}},bt={online:[{img:"https://i.pinimg.com/236x/7c/ab/18/7cab184c5e791921ed607e23458492b6.jpg"},{img:"https://whatsism.com/uploads/posts/2018-07/1530546770_rmk_vdjbx10.jpg"},{img:"https://shapka-youtube.ru/wp-content/uploads/2020/07/letter-s-1.jpg"}]},vt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bt;return e},Ot={},jt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ot;return e},_t={},wt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_t;return e},Pt={},St=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pt;return e},yt=n(136),kt=n(128),It=Object(W.c)({profilePage:We,dialogsPage:_,musicPage:St,newsPage:wt,settingsPage:jt,sidebar:vt,usersPage:se,auth:mt,form:kt.a,app:ht}),Ct=Object(W.e)(It,Object(W.a)(yt.a));window.store=Ct;var Nt=Ct,xt=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.props.initializeApp()}},{key:"render",value:function(){return this.props.initialized?r.a.createElement("div",{className:"app-wrapper"},r.a.createElement(ft,null),r.a.createElement(d,null),r.a.createElement("div",{className:"app-wrapper-content"},r.a.createElement(b.b,{path:"/dialog",render:function(){return r.a.createElement(J,null)}}),r.a.createElement(b.b,{path:"/profile/:userId?",render:function(){return r.a.createElement(at,null)}}),r.a.createElement(b.b,{path:"/users",render:function(){return r.a.createElement(Ae,null)}}),r.a.createElement(b.b,{path:"/news",render:function(){return r.a.createElement(g,null)}}),r.a.createElement(b.b,{path:"/music",render:function(){return r.a.createElement(E,null)}}),r.a.createElement(b.b,{path:"/settings",render:function(){return r.a.createElement(h,null)}}),r.a.createElement(b.b,{path:"/login",render:function(){return r.a.createElement(gt,null)}}))):r.a.createElement(Se,null)}}]),n}(r.a.Component),Tt=Object(W.d)(b.f,Object(B.b)((function(e){return{initialized:e.app.initialized}}),{initializeApp:function(){return function(e){e(ut()).then((function(){return e({type:"SET_INITIALIZED"})}))}}}))(xt),At=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,null,r.a.createElement(B.a,{store:Nt},r.a.createElement(Tt,null))))};s.a.render(r.a.createElement(At,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},43:function(e,t,n){e.exports={dialogs:"Dialog_dialogs__e1J6v",dialogsItems:"Dialog_dialogsItems__2cONP",messages:"Dialog_messages__2hwWj",message:"Dialog_message__-7i2n"}},51:function(e,t,n){e.exports={formControl:"FormsControl_formControl__1LemD",error:"FormsControl_error__-e2HO",formSummaryError:"FormsControl_formSummaryError__29Z7G"}},54:function(e,t,n){e.exports={wallpapers:"ProfileInfo_wallpapers__2iEw_",profileInfo:"ProfileInfo_profileInfo__3Enhk",avatar:"ProfileInfo_avatar__3VWwV",description:"ProfileInfo_description__omMoN"}},67:function(e,t,n){e.exports=n.p+"static/media/avatar.fc047347.png"},69:function(e,t,n){e.exports={item:"Post_item__3V_Ek",body:"Post_body__33wmE",like:"Post_like__3JHhL"}},89:function(e,t,n){e.exports={dialogItem:"DialogItem_dialogItem__3xVTQ",active:"DialogItem_active__2jDqt"}},93:function(e,t,n){e.exports={selectedPage:"Paginator_selectedPage__wdRfl",pageBlock:"Paginator_pageBlock__3U2uw"}},94:function(e,t,n){e.exports={header:"Header_header__bggHu",loginBlock:"Header_loginBlock__39RRm"}}},[[162,1,2]]]);
//# sourceMappingURL=main.fd20fd5b.chunk.js.map